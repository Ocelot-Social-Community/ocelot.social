import{f as X,u as Z,g as M,h as ee,j as se,t as te,i as ae,k as A,l as C,m as t,n as ne,p as U,s as re,R as T,q as le,v as ie,x as ue,y as oe,z as ce,A as I,B as j,D as de,C as ve,E as pe,F as ge,G as ye,H as me,I as he,J as O,K as fe,L as R}from"./app-CyHXIswm.js";const we=["/de/","/en/","/es/","/fr/","/de/contact/","/de/contribute/","/de/donate/","/de/features/","/de/get-started/","/de/imprint/","/de/learn/","/de/news/","/de/privacy-policy/","/en/contact/","/en/contribute/","/en/donate/","/en/features/","/en/get-started/","/en/imprint/","/en/learn/","/en/news/","/en/privacy-policy/","/es/contact/","/es/contribute/","/es/donate/","/es/features/","/es/get-started/","/es/imprint/","/es/learn/","/es/news/","/es/privacy-policy/","/fr/contact/","/fr/contribute/","/fr/donate/","/fr/features/","/fr/get-started/","/fr/imprint/","/fr/learn/","/fr/news/","/fr/privacy-policy/","/de/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/de/news/2025-08-18-tech-day-fusion-von-utopia-und-ocelot/","/de/news/2025-09-15-release-3-12-0-published/","/de/news/2025-09-23-tech-day-oauth-and-oidc/","/de/news/2025-10-28-release-3-13-0-add-call-to-action-on-comment-list/","/de/news/2025-11-05-crowdfunding-feature-pinned-posts-in-groups/","/de/news/2026-01-20-crowdfunding-feature-pinned-posts-in-groups-thanks/","/en/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/en/news/2025-08-18-tech-day-fusion-von-utopia-und-ocelot/","/en/news/2025-09-15-release-3-12-0-published/","/en/news/2025-09-23-tech-day-oauth-and-oidc/","/en/news/2025-10-28-release-3-13-0-add-call-to-action-on-comment-list/","/en/news/2025-11-05-crowdfunding-feature-pinned-posts-in-groups/","/en/news/2026-01-20-crowdfunding-feature-pinned-posts-in-groups-thanks/","/es/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/es/news/2025-08-18-tech-day-fusion-von-utopia-und-ocelot/","/es/news/2025-09-15-release-3-12-0-published/","/es/news/2025-09-23-tech-day-oauth-and-oidc/","/es/news/2025-11-05-crowdfunding-feature-pinned-posts-in-groups/","/fr/news/2025-07-05-release-3-11-0-with-numerous-improvements/","/fr/news/2025-11-05-crowdfunding-feature-pinned-posts-in-groups/","/404.html","/de/category/","/de/category/releases/","/de/category/lectures/","/de/category/funding/","/de/category/features/","/en/category/","/en/category/releases/","/en/category/lectures/","/en/category/funding/","/en/category/features/","/es/category/","/es/category/releases/","/es/category/lectures/","/es/category/financiaci%C3%B3n/","/es/category/funciones/","/fr/category/","/fr/category/releases/","/fr/category/financement/","/fr/category/fonctionnalit%C3%A9s/","/de/tag/","/de/tag/releases/","/de/tag/tech-day/","/de/tag/funding/","/de/tag/groups/","/de/tag/posts/","/de/tag/pins/","/en/tag/","/en/tag/releases/","/en/tag/tech-day/","/en/tag/funding/","/en/tag/groups/","/en/tag/posts/","/en/tag/pins/","/es/tag/","/es/tag/releases/","/es/tag/tech-day/","/es/tag/financiaci%C3%B3n/","/es/tag/grupos/","/es/tag/publicaciones/","/es/tag/anclar/","/fr/tag/","/fr/tag/releases/","/fr/tag/financement/","/fr/tag/groupes/","/fr/tag/posts/","/fr/tag/%C3%A9pingler/","/de/article/","/en/article/","/es/article/","/fr/article/","/de/star/","/en/star/","/es/star/","/fr/star/","/de/timeline/","/en/timeline/","/es/timeline/","/fr/timeline/"],He="SLIMSEARCH_QUERY_HISTORY",m=O(He,[]),ke=()=>{const{queryHistoryCount:n}=R;return{enabled:n>0,queryHistories:m,addQueryHistory:i=>{m.value=Array.from(new Set([i,...m.value.slice(0,n-1)]))},removeQueryHistory:i=>{m.value=[...m.value.slice(0,i),...m.value.slice(i+1)]}}},D=n=>we[n.id]+("anchor"in n?`#${n.anchor}`:""),Ce="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:B}=R,h=O(Ce,[]),Re=()=>({enabled:B>0,resultHistories:h,addResultHistory:l=>{{const i={link:D(l),display:l.display};"header"in l&&(i.header=l.header),h.value=[i,...h.value.slice(0,B-1)]}},removeResultHistory:l=>{h.value=[...h.value.slice(0,l),...h.value.slice(l+1)]}}),Qe=n=>{const l=de(),i=M(),Q=ve(),u=A(0),f=C(()=>u.value>0),d=pe([]);return ge(()=>{const{search:q,terminate:p}=ye(),w=me(g=>{const{resultsFilter:x=a=>a,querySplitter:y,suggestionsFilter:$,...r}=l.value;g?(u.value+=1,q(g,i.value,r).then(a=>x(a,g,i.value,Q.value)).then(a=>{u.value-=1,d.value=a}).catch(a=>{console.warn(a),u.value-=1,u.value||(d.value=[])})):d.value=[]},R.searchDelay-R.suggestDelay,{maxWait:5e3});U([n,i],([g])=>{w(g.join(" "))},{immediate:!0}),he(()=>{p()})}),{isSearching:f,results:d}};var xe=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(n,{emit:l}){const i=Z(),Q=M(),u=ee(se),{addQueryHistory:f,queryHistories:d,removeQueryHistory:q}=ke(),{resultHistories:p,addResultHistory:w,removeResultHistory:g}=Re(),x=te(n,"queries"),{results:y,isSearching:$}=Qe(x),r=ae({isQuery:!0,index:0}),a=A(0),v=A(0),E=C(()=>d.value.length>0||p.value.length>0),S=C(()=>y.value.length>0),b=C(()=>y.value[a.value]||null),P=()=>{const{isQuery:e,index:s}=r;s===0?(r.isQuery=!e,r.index=e?p.value.length-1:d.value.length-1):r.index=s-1},Y=()=>{const{isQuery:e,index:s}=r;s===(e?d.value.length-1:p.value.length-1)?(r.isQuery=!e,r.index=0):r.index=s+1},_=()=>{a.value=a.value>0?a.value-1:y.value.length-1,v.value=b.value.contents.length-1},z=()=>{a.value=a.value<y.value.length-1?a.value+1:0,v.value=0},G=()=>{v.value<b.value.contents.length-1?v.value+=1:z()},J=()=>{v.value>0?v.value-=1:_()},L=e=>e.map(s=>fe(s)?s:t(s[0],s[1])),K=e=>{if(e.type==="customField"){const s=oe[e.index]||"$content",[o,k=""]=ce(s)?s[Q.value].split("$content"):s.split("$content");return e.display.map(c=>t("div",L([o,...c,k])))}return e.display.map(s=>t("div",L(s)))},H=()=>{a.value=0,v.value=0,l("updateQuery",""),l("close")},V=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},u.value.queryHistory),d.value.map((e,s)=>t("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===s}],onClick:()=>{l("updateQuery",e)}},[t(I,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:j,onClick:o=>{o.preventDefault(),o.stopPropagation(),q(s)}})]))])),W=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},u.value.resultHistory),p.value.map((e,s)=>t(T,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===s}],onClick:()=>{H()}},()=>[t(I,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(o=>L(o)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:j,onClick:o=>{o.preventDefault(),o.stopPropagation(),g(s)}})]))]));return ne("keydown",e=>{if(n.isFocusing){if(S.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const s=b.value.contents[v.value];f(n.queries.join(" ")),w(s),i.push(D(s)),H()}}else if(e.key==="ArrowUp")P();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:s}=r;r.isQuery?(l("updateQuery",d.value[s]),e.preventDefault()):(i.push(p.value[s].link),H())}}}),U([a,v],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:n.queries.length?!S.value:!E.value}],id:"slimsearch-results"},n.queries.length?$.value?t(re,{hint:u.value.searching}):S.value?t("ul",{class:"slimsearch-result-list"},y.value.map(({title:e,contents:s},o)=>{const k=a.value===o;return t("li",{class:["slimsearch-result-list-item",{active:k}]},[t("div",{class:"slimsearch-result-title"},e||u.value.defaultTitle),s.map((c,N)=>{const F=k&&v.value===N;return t(T,{to:D(c),class:["slimsearch-result-item",{active:F,"aria-selected":F}],onClick:()=>{f(n.queries.join(" ")),w(c),H()}},()=>[c.type==="text"?null:t(c.type==="title"?le:c.type==="heading"?ie:ue,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?t("div",{class:"content-header"},c.header):null,t("div",K(c))])])})])})):u.value.emptyResult:E.value?[V(),W()]:u.value.emptyHistory)}});export{xe as default};
